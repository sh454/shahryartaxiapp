// Translations object
const translations = {
    en: {
        home: 'Home',
        services: 'Services',
        vehicles: 'Vehicles',
        drivers: 'Drivers',
        contact: 'Contact',
        book_now: 'Book Now',
        hero_title: 'Premium Taxi Service In Your City',
        hero_description: 'SwiftRide offers comfortable, safe and reliable transportation services with professional drivers and luxury vehicles.',
        book_a_ride: 'Book a Ride',
        our_fleet: 'Our Fleet',
        book_your_ride: 'Book Your Ride',
        pickup_location: 'Pickup Location',
        destination: 'Destination',
        date: 'Date',
        time: 'Time',
        vehicle_type: 'Vehicle Type',
        standard: 'Standard (4 seats)',
        executive: 'Executive (4 seats)',
        luxury: 'Luxury (4 seats)',
        minivan: 'Minivan (7 seats)',
        why_choose: 'Why Choose SwiftRide',
        why_description: 'We provide premium transportation services with a focus on safety, comfort and reliability.',
        safe_secure: 'Safe & Secure',
        safe_description: 'All our drivers are thoroughly vetted and vehicles are regularly inspected for your safety.',
        punctual_service: 'Punctual Service',
        punctual_description: 'We value your time. Our drivers arrive on time and get you to your destination promptly.',
        premium_experience: 'Premium Experience',
        premium_description: 'Luxury vehicles, professional drivers, and exceptional customer service for a superior ride.',
        our_drivers: 'Our Professional Drivers',
        drivers_description: 'Meet our team of experienced and courteous drivers.',
        years_experience: 'years experience',
        customer_testimonials: 'What Our Customers Say',
        testimonials_description: 'Don\'t just take our word for it - hear from our satisfied customers.',
        testimonial1: 'SwiftRide provides exceptional service every time. The cars are always clean and the drivers are professional and courteous. I use them for all my business trips.',
        business_executive: 'Business Executive',
        testimonial2: 'I\'ve tried many taxi services, but SwiftRide stands out for their reliability and comfort. The app makes booking easy, and I always get a confirmation right away.',
        frequent_traveler: 'Frequent Traveler',
        testimonial3: 'Perfect for airport transfers. The driver was waiting for me when I arrived, helped with my luggage, and got me to my hotel quickly. Will definitely use again!',
        tourist: 'Tourist',
        contact_us: 'Contact Us',
        contact_description: 'Have questions or need assistance? Reach out to our friendly support team.',
        get_in_touch: 'Get in Touch',
        address: 'Address',
        phone: 'Phone',
        email: 'Email',
        follow_us: 'Follow Us',
        send_message: 'Send Us a Message',
        name: 'Name',
        subject: 'Subject',
        message: 'Message',
        footer_description: 'Premium taxi service providing comfortable, safe and reliable transportation in your city.',
        quick_links: 'Quick Links',
        airport_transfers: 'Airport Transfers',
        city_rides: 'City Rides',
        business_travel: 'Business Travel',
        special_events: 'Special Events',
        hourly_rentals: 'Hourly Rentals',
        newsletter: 'Newsletter',
        newsletter_description: 'Subscribe to get updates on special offers.',
        your_email: 'Your email',
        privacy_policy: 'Privacy Policy',
        terms_of_service: 'Terms of Service',
        faq: 'FAQ',
        booking_confirmed: 'Booking Confirmed!',
        booking_success: 'Your taxi has been successfully booked.',
        date_time: 'Date & Time',
        done: 'Done',
        standard_sedan: 'Standard Sedan',
        standard_description: 'Comfortable and economical for everyday rides.',
        executive_sedan: 'Executive Sedan',
        executive_description: 'Premium comfort for business or special occasions.',
        luxury_suv: 'Luxury SUV',
        luxury_description: 'Spacious and luxurious for groups or extra comfort.',
        minivan_description: 'Perfect for larger groups or extra luggage.'
    },
    de: {
        home: 'Startseite',
        services: 'Dienstleistungen',
        vehicles: 'Fahrzeuge',
        drivers: 'Fahrer',
        contact: 'Kontakt',
        book_now: 'Jetzt buchen',
        hero_title: 'Premium Taxi Service in Ihrer Stadt',
        hero_description: 'SwiftRide bietet komfortable, sichere und zuverlässige Transportdienste mit professionellen Fahrern und Luxusfahrzeugen.',
        book_a_ride: 'Eine Fahrt buchen',
        our_fleet: 'Unsere Flotte',
        book_your_ride: 'Buchen Sie Ihre Fahrt',
        pickup_location: 'Abholort',
        destination: 'Zielort',
        date: 'Datum',
        time: 'Uhrzeit',
        vehicle_type: 'Fahrzeugtyp',
        standard: 'Standard (4 Sitze)',
        executive: 'Executive (4 Sitze)',
        luxury: 'Luxus (4 Sitze)',
        minivan: 'Minivan (7 Sitze)',
        why_choose: 'Warum SwiftRide wählen',
        why_description: 'Wir bieten Premium-Transportdienste mit Fokus auf Sicherheit, Komfort und Zuverlässigkeit.',
        safe_secure: 'Sicher & Geschützt',
        safe_description: 'Alle unsere Fahrer werden gründlich überprüft und Fahrzeuge werden regelmäßig inspiziert für Ihre Sicherheit.',
        punctual_service: 'Pünktlicher Service',
        punctual_description: 'Wir schätzen Ihre Zeit. Unsere Fahrer kommen pünktlich und bringen Sie prompt ans Ziel.',
        premium_experience: 'Premium-Erlebnis',
        premium_description: 'Luxusfahrzeuge, professionelle Fahrer und außergewöhnlicher Kundenservice für eine überlegene Fahrt.',
        our_drivers: 'Unsere Professionellen Fahrer',
        drivers_description: 'Lernen Sie unser Team von erfahrenen und höflichen Fahrern kennen.',
        years_experience: 'Jahre Erfahrung',
        customer_testimonials: 'Was unsere Kunden sagen',
        testimonials_description: 'Nehmen Sie nicht nur unser Wort - hören Sie von unseren zufriedenen Kunden.',
        testimonial1: 'SwiftRide bietet jedes Mal einen außergewöhnlichen Service. Die Autos sind immer sauber und die Fahrer sind professionell und höflich. Ich nutze sie für all meine Geschäftsreisen.',
        business_executive: 'Geschäftsführer',
        testimonial2: 'Ich habe viele Taxi-Dienste ausprobiert, aber SwiftRide hebt sich durch Zuverlässigkeit und Komfort ab. Die App macht die Buchung einfach, und ich bekomme immer sofort eine Bestätigung.',
        frequent_traveler: 'Häufiger Reisender',
        testimonial3: 'Perfekt für Flughafentransfers. Der Fahrer wartete auf mich, als ich ankam, half mit meinem Gepäck und brachte mich schnell zu meinem Hotel. Werde definitiv wieder nutzen!',
        tourist: 'Tourist',
        contact_us: 'Kontaktieren Sie uns',
        contact_description: 'Haben Sie Fragen oder brauchen Hilfe? Kontaktieren Sie unser freundliches Support-Team.',
        get_in_touch: 'In Kontakt treten',
        address: 'Adresse',
        phone: 'Telefon',
        email: 'E-Mail',
        follow_us: 'Folgen Sie uns',
        send_message: 'Senden Sie uns eine Nachricht',
        name: 'Name',
        subject: 'Betreff',
        message: 'Nachricht',
        footer_description: 'Premium-Taxi-Service, der komfortable, sichere und zuverlässige Transporte in Ihrer Stadt bietet.',
        quick_links: 'Schnelle Links',
        airport_transfers: 'Flughafentransfers',
        city_rides: 'Stadtfahrten',
        business_travel: 'Geschäftsreisen',
        special_events: 'Spezielle Events',
        hourly_rentals: 'Stundenmieten',
        newsletter: 'Newsletter',
        newsletter_description: 'Abonnieren Sie, um Updates zu Sonderangeboten zu erhalten.',
        your_email: 'Ihre E-Mail',
        privacy_policy: 'Datenschutzrichtlinie',
        terms_of_service: 'Nutzungsbedingungen',
        faq: 'FAQ',
        booking_confirmed: 'Buchung bestätigt!',
        booking_success: 'Ihr Taxi wurde erfolgreich gebucht.',
        date_time: 'Datum & Uhrzeit',
        done: 'Fertig',
        standard_sedan: 'Standard Sedan',
        standard_description: 'Komfortabel und wirtschaftlich für Alltagsfahrten.',
        executive_sedan: 'Executive Sedan',
        executive_description: 'Premium-Komfort für Geschäfte oder besondere Anlässe.',
        luxury_suv: 'Luxus SUV',
        luxury_description: 'Geräumig und luxuriös für Gruppen oder extra Komfort.',
        minivan: 'Minivan',
        minivan_description: 'Perfekt für größere Gruppen oder extra Gepäck.'
    },
    ar: {
        home: 'الرئيسية',
        services: 'الخدمات',
        vehicles: 'المركبات',
        drivers: 'السائقون',
        contact: 'اتصل بنا',
        book_now: 'احجز الآن',
        hero_title: 'خدمة تاكسي بريميوم في مدينتك',
        hero_description: 'يوفر SwiftRide خدمات نقل مريحة وآمنة وموثوقة مع سائقين محترفين ومركبات فاخرة.',
        book_a_ride: 'احجز رحلة',
        our_fleet: 'أسطولنا',
        book_your_ride: 'احجز رحلتك',
        pickup_location: 'موقع الالتقاط',
        destination: 'الوجهة',
        date: 'التاريخ',
        time: 'الوقت',
        vehicle_type: 'نوع المركبة',
        standard: 'قياسي (4 مقاعد)',
        executive: 'تنفيذي (4 مقاعد)',
        luxury: 'فاخر (4 مقاعد)',
        minivan: 'ميني فان (7 مقاعد)',
        why_choose: 'لماذا تختار SwiftRide',
        why_description: 'نقدم خدمات نقل بريميوم مع التركيز على السلامة والراحة والموثوقية.',
        safe_secure: 'آمن ومؤمن',
        safe_description: 'جميع سائقينا يتم فحصهم بدقة والمركبات تُفحص بانتظام لسلامتك.',
        punctual_service: 'خدمة دقيقة',
        punctual_description: 'نقدر وقتك. يصل سائقونا في الوقت المحدد ويوصلونك إلى وجهتك بسرعة.',
        premium_experience: 'تجربة بريميوم',
        premium_description: 'مركبات فاخرة وسائقون محترفون وخدمة عملاء استثنائية لرحلة متفوقة.',
        our_drivers: 'سائقونا المحترفون',
        drivers_description: 'تعرف على فريقنا من السائقين ذوي الخبرة والمهذبين.',
        years_experience: 'سنوات خبرة',
        customer_testimonials: 'ما يقوله عملاؤنا',
        testimonials_description: 'لا تأخذ كلمتنا فقط - استمع من عملائنا الراضين.',
        testimonial1: 'يوفر SwiftRide خدمة استثنائية في كل مرة. السيارات دائمًا نظيفة والسائقون محترفون ومهذبون. أستخدمهم لجميع رحلاتي التجارية.',
        business_executive: 'مدير أعمال',
        testimonial2: 'لقد جربت العديد من خدمات التاكسي، لكن SwiftRide يبرز بموثوقيته وراحته. التطبيق يجعل الحجز سهلاً، وأحصل دائمًا على تأكيد فوري.',
        frequent_traveler: 'مسافر متكرر',
        testimonial3: 'مثالي لنقل المطار. كان السائق ينتظرني عند وصولي، ساعدني بحقائبي، وأوصلني إلى الفندق بسرعة. سأستخدمه بالتأكيد مرة أخرى!',
        tourist: 'سائح',
        contact_us: 'اتصل بنا',
        contact_description: 'لديك أسئلة أو تحتاج مساعدة؟ تواصل مع فريق الدعم الودود لدينا.',
        get_in_touch: 'تواصل معنا',
        address: 'العنوان',
        phone: 'الهاتف',
        email: 'البريد الإلكتروني',
        follow_us: 'تابعنا',
        send_message: 'أرسل لنا رسالة',
        name: 'الاسم',
        subject: 'الموضوع',
        message: 'الرسالة',
        footer_description: 'خدمة تاكسي بريميوم توفر نقل مريح وآمن وموثوق في مدينتك.',
        quick_links: 'روابط سريعة',
        airport_transfers: 'نقل المطار',
        city_rides: 'رحلات المدينة',
        business_travel: 'سفر الأعمال',
        special_events: 'أحداث خاصة',
        hourly_rentals: 'إيجارات ساعية',
        newsletter: 'النشرة الإخبارية',
        newsletter_description: 'اشترك للحصول على تحديثات حول العروض الخاصة.',
        your_email: 'بريدك الإلكتروني',
        privacy_policy: 'سياسة الخصوصية',
        terms_of_service: 'شروط الخدمة',
        faq: 'الأسئلة الشائعة',
        booking_confirmed: 'تم تأكيد الحجز!',
        booking_success: 'تم حجز تاكسيك بنجاح.',
        date_time: 'التاريخ والوقت',
        done: 'تم',
        standard_sedan: 'سيدان قياسي',
        standard_description: 'مريح واقتصادي للرحلات اليومية.',
        executive_sedan: 'سيدان تنفيذي',
        executive_description: 'راحة بريميوم للأعمال أو المناسبات الخاصة.',
        luxury_suv: 'SUV فاخر',
        luxury_description: 'واسع وفاخر للمجموعات أو الراحة الإضافية.',
        minivan: 'ميني فان',
        minivan_description: 'مثالي للمجموعات الكبيرة أو الأمتعة الإضافية.'
    }
};

// Function to set language
function setLanguage(lang) {
    document.querySelectorAll('[data-key]').forEach(el => {
        if (translations[lang][el.dataset.key]) {
            el.textContent = translations[lang][el.dataset.key];
        }
    });
    document.querySelectorAll('[data-placeholder-key]').forEach(el => {
        if (translations[lang][el.dataset.placeholderKey]) {
            el.placeholder = translations[lang][el.dataset.placeholderKey];
        }
    });
    document.dir = (lang === 'ar') ? 'rtl' : 'ltr';
    document.lang = lang;
    localStorage.setItem('preferredLang', lang);
}

// Wait for DOM to be fully loaded
document.addEventListener('DOMContentLoaded', function() {
    // Load preferred language
    const preferredLang = localStorage.getItem('preferredLang') || 'en';
    setLanguage(preferredLang);
    document.getElementById('language-select').value = preferredLang;

    // Language change listener
    document.getElementById('language-select').addEventListener('change', (e) => {
        setLanguage(e.target.value);
    });

    // Mobile Menu Toggle
    const mobileMenuButton = document.getElementById('mobileMenuButton');
    const mobileMenu = document.getElementById('mobileMenu');
    
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    }
    
    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                });
                
                // Close mobile menu if open
                if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
            }
        });
    });
    
    // Booking Form Submission (for the inline form, if kept)
    const bookingForm = document.getElementById('bookingForm');
    const confirmationModal = document.getElementById('confirmationModal');
    const modalPickup = document.getElementById('modalPickup');
    const modalDestination = document.getElementById('modalDestination');
    const modalDateTime = document.getElementById('modalDateTime');
    const modalVehicle = document.getElementById('modalVehicle');
    const closeModal = document.getElementById('closeModal');
    const modalCloseButton = document.getElementById('modalCloseButton');
    
    if (bookingForm && confirmationModal) {
        bookingForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get form values
            const pickup = document.getElementById('pickup').value;
            const destination = document.getElementById('destination').value;
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;
            const vehicle = document.getElementById('vehicle').value;
            
            // Format date and time
            const dateObj = new Date(date);
            const formattedDate = dateObj.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Format vehicle type
            let vehicleType;
            switch(vehicle) {
                case 'standard':
                    vehicleType = translations[document.lang].standard;
                    break;
                case 'executive':
                    vehicleType = translations[document.lang].executive;
                    break;
                case 'luxury':
                    vehicleType = translations[document.lang].luxury;
                    break;
                case 'minivan':
                    vehicleType = translations[document.lang].minivan;
                    break;
                default:
                    vehicleType = translations[document.lang].standard;
            }
            
            // Set modal content
            if (modalPickup) modalPickup.textContent = pickup || 'Not specified';
            if (modalDestination) modalDestination.textContent = destination || 'Not specified';
            if (modalDateTime) modalDateTime.textContent = `${formattedDate} at ${time || '--:--'}`;
            if (modalVehicle) modalVehicle.textContent = vehicleType;
            
            // Show modal
            confirmationModal.classList.remove('hidden');
            
            // Reset form
            bookingForm.reset();
        });
    }
    
    // Close modal
    if (closeModal) {
        closeModal.addEventListener('click', () => {
            confirmationModal.classList.add('hidden');
        });
    }
    
    if (modalCloseButton) {
        modalCloseButton.addEventListener('click', () => {
            confirmationModal.classList.add('hidden');
        });
    }
    
    // Close modal when clicking outside
    if (confirmationModal) {
        confirmationModal.addEventListener('click', (e) => {
            if (e.target === confirmationModal) {
                confirmationModal.classList.add('hidden');
            }
        });
    }
    
    // Set minimum date for booking (today)
    const dateInput = document.getElementById('date');
    if (dateInput) {
        const today = new Date().toISOString().split('T')[0];
        dateInput.min = today;
    }
    
    // Animation for vehicle cards on scroll
    const vehicleCards = document.querySelectorAll('.vehicle-card');
    
    const animateOnScroll = () => {
        vehicleCards.forEach(card => {
            const cardPosition = card.getBoundingClientRect().top;
            const screenPosition = window.innerHeight / 1.3;
            
            if (cardPosition < screenPosition) {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }
        });
    };
    
    // Initialize animation
    window.addEventListener('scroll', animateOnScroll);
    window.addEventListener('load', animateOnScroll);
});